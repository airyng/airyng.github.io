/*! For license information please see bundle.a8fbe04fc8c6936ecf21.js.LICENSE.txt */
(()=>{"use strict";var t,e,i,s,n={144:(t,e,i)=>{i.d(e,{Z:()=>h});var s=i(81),n=i.n(s),r=i(645),a=i.n(r)()(n());a.push([t.id,"html, body {\n    margin: 0;\n    padding: 0;\n    background-color: rgb(30,30,30);\n}\nbody {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    cursor: none;\n}\ncanvas {\n    margin: 0;\n    display: block;\n}",""]);const h=a},645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var i="",s=void 0!==e[5];return e[4]&&(i+="@supports (".concat(e[4],") {")),e[2]&&(i+="@media ".concat(e[2]," {")),s&&(i+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),i+=t(e),s&&(i+="}"),e[2]&&(i+="}"),e[4]&&(i+="}"),i})).join("")},e.i=function(t,i,s,n,r){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(s)for(var h=0;h<this.length;h++){var o=this[h][0];null!=o&&(a[o]=!0)}for(var c=0;c<t.length;c++){var l=[].concat(t[c]);s&&a[l[0]]||(void 0!==r&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=r),i&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=i):l[2]=i),n&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=n):l[4]="".concat(n)),e.push(l))}},e}},81:t=>{t.exports=function(t){return t[1]}},853:(t,e,i)=>{var s=i(379),n=i.n(s),r=i(795),a=i.n(r),h=i(777),o=i.n(h),c=i(565),l=i.n(c),d=i(216),p=i.n(d),u=i(589),f=i.n(u),m=i(144),y={};y.styleTagTransform=f(),y.setAttributes=l(),y.insert=o().bind(null,"head"),y.domAPI=a(),y.insertStyleElement=p(),n()(m.Z,y),m.Z&&m.Z.locals&&m.Z.locals},379:t=>{var e=[];function i(t){for(var i=-1,s=0;s<e.length;s++)if(e[s].identifier===t){i=s;break}return i}function s(t,s){for(var r={},a=[],h=0;h<t.length;h++){var o=t[h],c=s.base?o[0]+s.base:o[0],l=r[c]||0,d="".concat(c," ").concat(l);r[c]=l+1;var p=i(d),u={css:o[1],media:o[2],sourceMap:o[3],supports:o[4],layer:o[5]};if(-1!==p)e[p].references++,e[p].updater(u);else{var f=n(u,s);s.byIndex=h,e.splice(h,0,{identifier:d,updater:f,references:1})}a.push(d)}return a}function n(t,e){var i=e.domAPI(e);return i.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;i.update(t=e)}else i.remove()}}t.exports=function(t,n){var r=s(t=t||[],n=n||{});return function(t){t=t||[];for(var a=0;a<r.length;a++){var h=i(r[a]);e[h].references--}for(var o=s(t,n),c=0;c<r.length;c++){var l=i(r[c]);0===e[l].references&&(e[l].updater(),e.splice(l,1))}r=o}}},777:t=>{var e={};t.exports=function(t,i){var s=function(t){if(void 0===e[t]){var i=document.querySelector(t);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}e[t]=i}return e[t]}(t);if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(i)}},216:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:(t,e,i)=>{t.exports=function(t){var e=i.nc;e&&t.setAttribute("nonce",e)}},795:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(i){!function(t,e,i){var s="";i.supports&&(s+="@supports (".concat(i.supports,") {")),i.media&&(s+="@media ".concat(i.media," {"));var n=void 0!==i.layer;n&&(s+="@layer".concat(i.layer.length>0?" ".concat(i.layer):""," {")),s+=i.css,n&&(s+="}"),i.media&&(s+="}"),i.supports&&(s+="}");var r=i.sourceMap;r&&"undefined"!=typeof btoa&&(s+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleTagTransform(s,t,e.options)}(e,t,i)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},378:(t,e,i)=>{i.d(e,{Z:()=>n});var s=i(20);class n extends s.K_{_moveDirection=0;_maxSpeed=3;_speed=0;_initialScale=1;_adrenalineMode=!1;_adrenalineTimeLimit=!1;_winking=!1;_lastWinkingTime=0;_winkingCooldown=1.5;constructor(t){const e=t.scale||1,i={};if(t.image&&(i.image=t.image),t.animations&&(i.animations=t.animations),super({x:t.x,y:t.y,anchor:{x:.5,y:0},scaleX:e,scaleY:e,...i}),this._initialScale=e,this._speed=this._maxSpeed,t.extraAnimations?.winking){const e=new s.K_({x:-2,y:5,animations:t.extraAnimations.winking});e.opacity=0,this.addChild(e)}}update(t,e){this._adrenalineMode&&this._adrenalineTimeLimit<=Date.now()&&this.deactivateAdrenaline(),this.calculateMovement(t,e),super.update()}setMoveDirection(t){this._moveDirection!==t&&(0===t?this.animations?.idle&&this.playAnimation("idle"):(this.animations?.walk&&this.playAnimation("walk"),this.isAdrenalined()&&this.animations?.run&&this.playAnimation("run")),this._moveDirection=t)}setWinking(t){if(t||(this._winking=t),!t||!this.children[0]?.animations?.wink||Date.now()<=this._lastWinkingTime+1e3*this._winkingCooldown)return;this._winking=t,this.children[0].opacity=1,this.children[0].playAnimation("wink");const e=this.children[0].animations.wink.frames.length/this.children[0].animations.wink.frameRate;setTimeout((()=>{this.children[0].opacity=0}),1e3*e),this._lastWinkingTime=Date.now()}isWinking(){return!!this._winking}activateAdrenaline(t=1){this._adrenalineMode=!0,this._speed=2*this._maxSpeed,this._adrenalineTimeLimit=1e3*t+Date.now(),0!==this.dx&&this.animations?.run&&this.playAnimation("run")}deactivateAdrenaline(){this._adrenalineMode=!1,this._speed=this._maxSpeed,this._adrenalineTimeLimit=0,0!==this.dx&&this.animations?.walk&&this.playAnimation("walk")}isAdrenalined(){return!!this._adrenalineMode}calculateMovement(t,e={left:150,right:150}){0!==this._moveDirection&&(this.scaleX=this._moveDirection<0?-this._initialScale:this._initialScale),this.dx=this._moveDirection*this._speed;const i=this.x-this.width*this.anchor.x;return this.dx<0&&i-(t.camera.x-t.camera.width/2)<=e.left?(t.camera.x<=t.camera.width/2&&(this.dx=0),void(t.camera.x+=this.dx)):this.dx>0&&i-(t.camera.x-t.camera.width/2)>=t.camera.width-e.right-this.width?(t.camera.x+t.camera.width/2>=t.width&&(this.dx=0),void(t.camera.x+=this.dx)):void 0}}},239:(t,e,i)=>{i.d(e,{lg:()=>a,vd:()=>n,yU:()=>r});var s=i(20);const n=(t={})=>new s.xv({text:"-",font:`${t.fontSize||24}px cursive, Arial`,color:"white",x:50,y:50,anchor:{x:0,y:.5},textAlign:"center",...t}),r=(t={})=>new s.jy({x:0,y:0,width:100,height:100,color:"black",anchor:{x:0,y:0},...t}),a=(t={})=>{let e=(0,s.Kg)({maxSize:t.maxSize||1,create:s.jy});return{pool:e,update:()=>{e.get(t.get()),e.update()},destroy:()=>{e.objects.forEach((t=>{t.opacity=0,t.ttl=0})),e.clear()}}}},157:(t,e,i)=>{i.d(e,{C6:()=>r,pS:()=>n,xo:()=>a});var s=i(20);const n=(t,e={x:0,y:0},i={x:0,y:0},s=1,n="grey")=>{const r=t.context;r.beginPath(),r.strokeStyle=n,r.lineWidth=s,r.moveTo(e.x,e.y),r.lineTo(i.x,i.y),r.stroke()},r=(t,e)=>{const i=t.width,s=t.height,n=e.clientWidth,r=e.clientHeight;let a=n/i;n>r&&s*a>r&&(a=r/s),r>n&&i*a>n&&(a=n/i),t.style.width=i*a+"px",t.style.height=s*a+"px"},a=(t,e,i={x:0,y:0},r={x:0,y:0})=>{const a=new Array(t).fill(null).map((()=>({x:(0,s.rO)(i.x,r.x),y:(0,s.rO)(i.y,r.y),visible:!0}))),h=setInterval((()=>{const t=a.find((t=>!t.visible));t&&(t.visible=!0),a[(0,s.rO)(0,a.length-1)].visible=!1}),500);return{stars:a,render(){a.forEach((t=>{t.visible&&n(e,{x:t.x,y:t.y},{x:t.x+1,y:t.y+1})}))},destroy(){clearInterval(h)}}}},943:(t,e,i)=>{i.d(e,{Z:()=>s});const s={handlers:{},pressedButtons:[],init(){document.onkeydown=t=>{t.repeat||(this.pressedButtons.push(t.code),this.handlers[t.code]?.down?.())},document.onkeyup=t=>{this.pressedButtons=this.pressedButtons.filter((e=>e!==t.code)),this.handlers[t.code]?.up?.()}},on(t,e,i){this.handlers[t]={down:e,up:i}},off(t){delete this.handlers[t]},isPressed(t){return this.pressedButtons.findIndex((e=>e===t))>-1},getMaxPriorityPressedButton(t=[]){const e=t.map((t=>this.pressedButtons.findIndex((e=>e===t)))).reduce(((t,e)=>Math.max(t,e)),-1);return this.pressedButtons[e]}}},138:(t,e,i)=>{i.a(t,(async(t,e)=>{try{i(853);var s=i(20),n=i(1),r=i(157);const t=1200,a=800,{canvas:h}=(0,s.S1)();h.width=t,h.height=a,(0,s.Sy)().imageSmoothingEnabled=!1,["load","resize"].forEach((t=>window.addEventListener(t,(()=>(0,r.C6)(h,document.querySelector("body")))))),await(0,s.zD)(...Object.keys(n.Z).map((t=>n.Z[t])));const o=(await Promise.resolve().then(i.bind(i,95))).default,c={width:t,height:a,sprites:n.Z,spriteSheets:o,sceneSetupsList:{start:(await Promise.resolve().then(i.bind(i,282))).default,game:(await Promise.resolve().then(i.bind(i,786))).default}},l=async(t,e)=>{t?.beforeDestroy?.(),t?.destroy?.();const{loop:i}=await e(c,l);i.start()};l(null,c.sceneSetupsList.start),e()}catch(t){e(t)}}),1)},786:(t,e,i)=>{i.r(e),i.d(e,{default:()=>g});var s=i(20),n=i(378);class r extends s.K_{_maxSpeed=3;_speed=0;_targetX=null;_startX=null;_initialScale=1;_adrenalineMode=!1;_adrenalineTimeLimit=!1;_viewLength=300;_flipInterval=null;constructor(t){const e=(t.scale||1)*(Math.random()>.5?1:-1),i={};t.image&&(i.image=t.image),t.animations&&(i.animations=t.animations),super({x:t.x,y:t.y,anchor:{x:.5,y:0},scaleX:e,scaleY:t.scale||1,...i}),this._viewLength=t.viewLength||300,this._startX=t.x,this._initialScale=e,this._speed=this._maxSpeed,this._flipInterval=setInterval((()=>{this.targetX||(this.scaleX*=-1,this.animations?.sip&&this.playAnimation("sip"),this.onFlipped?.())}),1e3*(0,s.rO)(5,10))}clearCycle(){clearInterval(this._flipInterval)}setTargetX(t){this._targetX=t}stopMoving(){this._targetX=null,this.dx=0,this.animations?.idle&&this.playAnimation("idle")}moveTo(t){const e=t>this.x?1:-1;this.dx=e*this._speed,this.scaleX=Math.abs(this._initialScale)*e,this.animations?.walk&&this.playAnimation("walk"),this.isAdrenalined()&&this.animations?.run&&this.playAnimation("run")}activateAdrenaline(t=1){this._adrenalineMode=!0,this._speed=2.1*this._maxSpeed,this._adrenalineTimeLimit=1e3*t+Date.now()}deactivateAdrenaline(){this._adrenalineMode=!1,this._speed=this._maxSpeed,this._adrenalineTimeLimit=0}isAdrenalined(){return!!this._adrenalineMode}checkIsPointInView(t){const e=this.scaleX>0?1:-1,i=Math.min(this.x,this.x+this._viewLength*e),s=Math.max(this.x,this.x+this._viewLength*e);return t>=i&&t<=s}update(){this._adrenalineMode&&this._adrenalineTimeLimit<=Date.now()&&this.deactivateAdrenaline(),null!==this._targetX&&Math.abs(this.x-this._targetX)<=this.dx&&(this._targetX===this._startX?this.stopMoving():this.setTargetX(this._startX)),null!==this._targetX&&this.moveTo(this._targetX),super.update()}}var a=i(1);class h extends r{_loveLevel=0;constructor(t){super(t);const e=(t=0,e=-10)=>new s.jy({image:s.H1[a.Z.heart],x:t,y:e,opacity:0,anchor:{x:.5,y:0}});this.addChild(e(s.H1[a.Z.heart].width/2),e(s.H1[a.Z.heart].width/2-(s.H1[a.Z.heart].width+1)),e(s.H1[a.Z.heart].width/2-(s.H1[a.Z.heart].width+1)/2,-17))}increaseLoveLevel(t=1){this._loveLevel+=t,this._loveLevel>3&&(this._loveLevel=3);for(let t=1;t<=this._loveLevel;t++)this.children[t-1].opacity=1}onFlipped(){this.children.forEach((t=>{t.scaleX*=-1}))}}class o extends r{_loveLevel=0;constructor(t){super(t);const e=new s.jy({image:s.H1[a.Z.rage],x:-3,y:8,opacity:0});this.addChild(e)}activateAdrenaline(t){super.activateAdrenaline(t),this.children[0].opacity=1}deactivateAdrenaline(){super.deactivateAdrenaline(),this.children[0].opacity=0}}var c=i(943),l=i(239),d=i(157),p=i(634);const u=3,f=3,m=180,y="#b20116",x=function(t,e,i=!0){const n=new s.l({x:t,y:e}),r=new Array(2).fill(null).map(((t,e)=>new s.jy({x:12*e,y:0,width:2,height:1,scaleX:f,scaleY:f,color:"#bca77f",opacity:0})));return n.addChild(r),i&&setTimeout((function t(){setTimeout((()=>{n.isAlive()&&(n.children.forEach((t=>{t.opacity=0})),setTimeout((()=>{n.isAlive()&&(n.children.forEach((t=>{t.opacity=1})),t())}),3e3))}),150)}),parseInt(5e3*Math.random())),n},w=t=>{const e=[];for(let i=0;i<5;i++)e.push((0,l.lg)({maxSize:[0,1,2][(0,s.rO)(0,2)],get:()=>({x:t+15*i,y:180,dx:(2*-Math.random()+1)/10,dy:-.1,color:["#e6e583","#d3bb06","#ffffd5"][(0,s.rO)(0,2)],width:f,height:f,ttl:[100,140,180][(0,s.rO)(0,2)]})}));return e};async function g(t,e){const i=s.H1[t.sprites.backgroundRepeatable],r=s.H1[t.sprites.backgroundStart],a=s.H1[t.sprites.backgroundEnd],g={x:.5,y:.5},_=t.width/2,v=t.height/2;let b=0,S=!1,A=null;const k=[116,460,814,1230,1580,2e3,2350,2762,3120,3372].map((e=>new s.jy({x:e,y:120,scaleX:f,scaleY:f,image:s.H1[t.sprites.candle]}))),M=new s.jy({x:0,y:120,scaleX:f,scaleY:f,image:r}),j=new Array(4).fill(null).map(((t,e)=>new s.jy({x:84*f+e*i.width*f,y:444,scaleX:f,scaleY:f,image:i}))),E=[s.H1[t.sprites.carpet1],s.H1[t.sprites.carpet2]].map(((t,e)=>new Array(120).fill(null).map(((i,n)=>new s.jy({x:n*t.width*f,y:e?681:630,scaleX:f,scaleY:f,image:t}))))).flat(),Z=new Array(128).fill(null).map(((e,i)=>new s.jy({x:252+i*s.H1[t.sprites.wall].width*f,y:207,scaleX:f,scaleY:f,image:s.H1[t.sprites.wall]}))),L=new Array(29).fill(null).map(((e,i)=>new s.jy({x:99+i*s.H1[t.sprites.rooster].width*f,y:387,scaleX:f,scaleY:f,image:s.H1[t.sprites.rooster]}))),X=new s.jy({x:252,y:110,color:"#8d8688",width:3072,height:97}),T=new s.jy({x:252,y:363,color:y,width:3072,height:24}),P=new s.jy({x:0,y:652,color:y,width:3500,height:30}),z=r.width*f+i.width*j.length*f+a.width*f,H=new s.jy({x:z-a.width*f,y:120,scaleX:f,scaleY:f,image:a}),D=new n.Z({x:300,y:t.height-250+6,animations:t.spriteSheets.playerSpritesheet.animations,scale:f,extraAnimations:{winking:t.spriteSheets.winkingSpritesheet.animations}}),C=Array(8).fill(null).map(((e,i)=>new h({x:400*(i+1),y:t.height-250,animations:t.spriteSheets[`men${(0,s.rO)(1,2)}Spritesheet`].animations,scale:f}))),I=Array(8).fill(null).map(((e,i)=>new o({x:400*(i+1)+100,y:t.height-250+6,animations:t.spriteSheets.womenSpritesheet.animations,scale:f,viewLength:500}))),R=(0,l.vd)({x:50,y:40}),O=(0,l.vd)({x:50,y:80}),Y=(0,l.vd)({x:_,y:65,fontSize:80,anchor:g}),W=(0,l.vd)({x:_,y:v,fontSize:80,anchor:g,text:p.Z.killed,opacity:0}),F=(0,l.vd)({x:_,y:v,fontSize:80,anchor:g,text:p.Z.win,opacity:0}),$=(0,l.vd)({x:_,y:v,fontSize:80,anchor:g,text:p.Z.timeOver,opacity:0}),B=(0,l.vd)({text:p.Z.restartInstructions,x:_,y:t.height-100,color:"grey",fontSize:16,opacity:0,anchor:{x:.5,y:.5}}),N=[{x:210,y:t.height-284}];for(let e=0;e<4;e++)[{x:363,y:284},{x:420,y:293},{x:534,y:296},{x:606,y:287},{x:681,y:296},{x:798,y:296},{x:978,y:300}].forEach((s=>{N.push({x:s.x+i.width*f*e,y:t.height-s.y})}));[{x:1038+i.width*f*3,y:t.height-290},{x:1131+i.width*f*3,y:t.height-266}].forEach((t=>{N.push(t)}));const q=N.map((t=>x(t.x,t.y))),U=[130,470,825,1240,1590,2010,2360,2775,3130,3385].map((t=>w(t))),K=new Array(50).fill(null).map((t=>(0,l.lg)({maxSize:10,get:()=>({x:D.x,y:D.y+60,dx:2*(2-4*Math.random()),dy:1-1.5*Math.random()+.5,color:"red",width:f,height:f,ttl:[10,14,18][(0,s.rO)(0,2)]})}))),V=new s.xs({id:"game",objects:[...Z,...L,T,X,P,...E,M,...j,H,...k,...q,...U.map((t=>t.map((t=>t.pool.objects)).flat())).flat(),...C,...I,D,...K.map((t=>t.pool.objects)).flat(),R,O],width:z,height:t.height}),J=(0,d.xo)(50,V,{x:5,y:5},{x:t.width-5,y:115}),G=t=>new Promise((e=>setTimeout(e,t)));Y.text="",setTimeout((async()=>{Y.text="1",await G(1e3),Y.text="2",await G(1e3),Y.text="3",await G(1e3),Y.text=p.Z.seduce,A=Date.now()+1e3*m,S=!0,c.Z.init(),c.Z.on("Space",(()=>D.setWinking(!0))),c.Z.on("ArrowRight",null,(()=>D.setMoveDirection(0))),c.Z.on("ArrowLeft",null,(()=>D.setMoveDirection(0))),await G(1e3),Y.text=""}),500);let Q=null,tt=!1;function et(){return b>=C.length}function it(){if(c.Z.off("Space"),c.Z.off("ArrowRight"),c.Z.off("ArrowLeft"),D.setMoveDirection(0),[...C,...I.filter((t=>t!==Q))].forEach((t=>t.clearCycle())),U.forEach((t=>t.forEach((t=>t.destroy())))),q.forEach((t=>{t.ttl=0,t.children.forEach((t=>t.opacity=0))})),Q){D.currentAnimation?.stop?.();const t=x(D.x-9,D.y+27,!1);t.children.forEach((t=>t.opacity=1)),V.objects.push(t)}setTimeout((()=>{B.opacity=1,c.Z.on("Space",(()=>{e(V,t.sceneSetupsList.game)}))}),1e3)}const st=new s.DX({update(){const t=c.Z.getMaxPriorityPressedButton(["ArrowRight","ArrowLeft"]);if(et()||Q||tt||!S||!t||D.setMoveDirection("ArrowLeft"===t?-1:1),D.isWinking()&&(I.forEach((t=>{t.checkIsPointInView(D.x)&&t.scaleX!==D.scaleX&&(t.activateAdrenaline(u),D.activateAdrenaline(u))})),C.forEach((t=>{if(t.checkIsPointInView(D.x)&&t.scaleX!==D.scaleX){const e=t._loveLevel;t.increaseLoveLevel(),e<3&&3===t._loveLevel&&(b++,et()&&it())}})),D.setWinking(!1)),I.filter((t=>t.isAdrenalined())).forEach((t=>t.setTargetX(D.x))),D?.update(V),C.forEach((t=>t.update())),I.forEach((t=>t.update())),O.text=`${p.Z.loversAttracted}: ${b}/${C.length}`,O.x=50+V.camera.x-V.camera.width/2,S&&A){const t=Math.floor((A-Date.now())/1e3);R.text=`${p.Z.timeLeft}: ${t<0?0:t} ${p.Z.sec}`,t<=0&&!Q&&(tt=!0,it())}else R.text=`${p.Z.timeLeft}: -`;R.x=50+V.camera.x-V.camera.width/2,U.forEach((t=>t.forEach((t=>{t.update()})))),I.forEach((t=>{t.isAdrenalined()&&t.x+t.width>=D.x-D.width&&t.x-t.width<=D.x+D.width&&!Q&&(Q=t,it())})),et()||!Q&&!tt||(Q&&K.forEach((t=>t.update())),V.objects.filter((t=>t!==Q&&t!==D)).forEach((t=>{t.opacity=(0,s.t7)(t.opacity,0,.05),t.children.forEach((t=>t.opacity=0))})),M.opacity<.01&&(Q?W.opacity=(0,s.t7)(W.opacity,1,.005):$.opacity=(0,s.t7)($.opacity,1,.005))),et()&&(D.setMoveDirection(-1),C.filter((t=>1===t.opacity))?.length>0?C.forEach((t=>{if(t.scaleX<.01)return void(t.opacity=0);t.children.forEach((t=>t.opacity=0));let e=parseFloat(1/Math.abs(Math.abs(t.x)-Math.abs(D.x)));e||(e=.01),e*=4,t.x=(0,s.t7)(t.x,D.x,e),t.y=(0,s.t7)(t.y,D.y+2*D.height,e),t.scaleX=(0,s.t7)(t.scaleX,0,e/2),t.scaleY=(0,s.t7)(t.scaleY,0,e/2)})):D.activateAdrenaline(),D.x<=200&&(V.objects.forEach((t=>{t.opacity=(0,s.t7)(t.opacity,0,.05),t.children.forEach((t=>t.opacity=0))})),M.opacity<.01&&(F.opacity=(0,s.t7)(F.opacity,1,.005))))},render(){V.render(),(0,d.pS)(V,{x:0,y:115},{x:t.width,y:115},10),[J,Y,Y,F,W,$,B].forEach((t=>t?.render()))}});return V.beforeDestroy=()=>{st.stop(),J.destroy(),K.forEach((t=>t.destroy())),U.forEach((t=>t.forEach((t=>t.destroy())))),c.Z.off("Space"),c.Z.off("ArrowRight"),c.Z.off("ArrowLeft"),[...C,...I].forEach((t=>t.clearCycle())),V.remove([...V.objects,Y])},{loop:st,scene:V}}},282:(t,e,i)=>{i.r(e),i.d(e,{default:()=>c});var s=i(20),n=i(943),r=i(239),a=i(378),h=i(157),o=i(634);async function c(t,e){const i=(0,r.yU)({width:t.width,height:t.height,color:"rgb(30,30,30)"}),c=(0,r.vd)({text:o.Z.gameName,x:t.width/2,y:150,color:"white",fontSize:48}),l=(0,r.vd)({text:o.Z.description,x:250,y:t.height-300,color:"white",fontSize:18,textAlign:"left"}),d=(0,r.vd)({text:o.Z.instructions,x:t.width/2,y:t.height-100,color:"grey",fontSize:16}),p=new a.Z({x:300,y:t.height-250+6,animations:t.spriteSheets.playerSpritesheet.animations,scale:3,extraAnimations:{winking:t.spriteSheets.winkingSpritesheet.animations}}),u=new s.xs({id:"startScreen",width:t.width,height:t.height}),f=(0,h.xo)(100,u,{x:5,y:5},{x:t.width-5,y:t.height-400});[c,d].forEach((t=>{t.x-=t.width/2})),n.Z.init(),n.Z.on("Space",(()=>p.setWinking(!0))),n.Z.on("ArrowRight",null,(()=>p.setMoveDirection(0))),n.Z.on("ArrowLeft",null,(()=>p.setMoveDirection(0)));const m=new s.DX({update(){const i=n.Z.getMaxPriorityPressedButton(["ArrowRight","ArrowLeft"]);i&&p.setMoveDirection("ArrowLeft"===i?-1:1),p.x>=t.width-200&&e(u,t.sceneSetupsList.game),p.update(u)},render(){i.render();const e=t.height-130;(0,h.pS)(u,{x:0,y:e},{x:t.width,y:e}),(0,h.pS)(u,{x:t.width-150,y:e-5},{x:t.width,y:e-5},10),(0,h.pS)(u,{x:t.width-100,y:e-15},{x:t.width,y:e-15},10),(0,h.pS)(u,{x:t.width-50,y:e-25},{x:t.width,y:e-25},10),(0,h.pS)(u,{x:t.width-5,y:e-280},{x:t.width-5,y:e},10),f.render(),[c,l,d,p].forEach((t=>t.render()))}});return u.beforeDestroy=()=>{m.stop(),n.Z.off("Space"),n.Z.off("ArrowRight"),n.Z.off("ArrowLeft"),f.destroy(),u.remove([c,l,d,p,i])},{loop:m,scene:u}}},95:(t,e,i)=>{i.r(e),i.d(e,{default:()=>a});var s=i(20),n=i(1);const r=(t,e,i,r)=>new s.V6({image:s.H1[n.Z[t]],frameWidth:e,frameHeight:i,animations:r}),a={men1Spritesheet:r("menSpritesheet",20,40,{idle:{frames:0},sip:{frames:[0,1,0],frameRate:1,loop:!1}}),men2Spritesheet:r("menSpritesheet",20,40,{idle:{frames:2},sip:{frames:[2,3,2],frameRate:1,loop:!1}}),playerSpritesheet:r("womenSpritesheet",30,38,{idle:{frames:[0,1],frameRate:.5},walk:{frames:[0,1],frameRate:2},run:{frames:[0,1,1],frameRate:8}}),womenSpritesheet:r("womenSpritesheet",30,38,{idle:{frames:[2,3],frameRate:.5},walk:{frames:[2,3],frameRate:2},run:{frames:[4,5],frameRate:8}}),winkingSpritesheet:r("winkingSpritesheet",7,14,{wink:{frames:[0,1],frameRate:10,loop:!1}})}},1:(t,e,i)=>{i.d(e,{Z:()=>s});const s={backgroundStart:i(609),backgroundRepeatable:i(136),backgroundEnd:i(687),heart:i(171),rage:i(80),candle:i(28),carpet1:i(569),carpet2:i(659),rooster:i(501),wall:i(567),winkingSpritesheet:i(823),menSpritesheet:i(945),womenSpritesheet:i(852)}},634:(t,e,i)=>{i.d(e,{Z:()=>s});const s=JSON.parse('{"gameName":"ÐŸÐ¸Ñ€ Ð¸ ÐºÑƒÑ€Ñ‚Ð¸Ð·Ð°Ð½ÐºÐ¸","description":"Ð˜ Ñ‚Ð°Ðº... Ð¡ÐµÐ³Ð¾Ð´Ð½Ñ Ð¼Ð½Ðµ Ð½ÑƒÐ¶Ð½Ð¾ ÑÐ¾Ð±Ð»Ð°Ð·Ð½Ð¸Ñ‚ÑŒ ÐºÐ°Ðº Ð¼Ð¾Ð¶Ð½Ð¾ Ð±Ð¾Ð»ÑŒÑˆÐµ Ð±Ð¾ÑÑ€,\\nÑ‡Ñ‚Ð¾Ð±Ñ‹ Ð²Ñ‹ÑƒÐ´Ð¸Ñ‚ÑŒ Ð·Ð¾Ð»Ð¾Ñ‚Ð¸ÑˆÐºÐ¾ Ð¸Ð· ÑÑ‚Ð¸Ñ… Ñ‚Ð¾Ð»ÑÑ‚Ð¾ÑÑƒÐ¼Ð¾Ð².\\nÐÐ°Ð´ÐµÑŽÑÑŒ, ÐºÐ¾Ð½ÐºÑƒÑ€ÐµÐ½Ñ‚Ð¾Ðº Ð½Ðµ Ð±ÑƒÐ´ÐµÑ‚ Ð½Ð° Ð¿Ð¸Ñ€Ñƒ...","instructions":"ÐÐ°Ð¶Ð¸Ð¼Ð°Ð¹Ñ‚Ðµ \'ÑÑ‚Ñ€ÐµÐ»ÐºÐ¸\' Ð´Ð»Ñ Ð¿ÐµÑ€ÐµÐ¼ÐµÑ‰ÐµÐ½Ð¸Ñ Ð²Ð»ÐµÐ²Ð¾ Ð¸ Ð²Ð¿Ñ€Ð°Ð²Ð¾. ÐÐ°Ð¶Ð¼Ð¸Ñ‚Ðµ \'Ð¿Ñ€Ð¾Ð±ÐµÐ»\', Ñ‡Ñ‚Ð¾Ð±Ñ‹ ÑÐ¾Ð±Ð»Ð°Ð·Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ Ð¿Ð¾Ð´Ð¼Ð¸Ð³Ð½ÑƒÑ‚ÑŒ","killed":"Ð’Ñ‹ Ð¿Ð¾Ð³Ð¸Ð±Ð»Ð¸","win":"Ð’ÑÐµ Ð±Ð¾ÑÑ€Ðµ ÑÐ¾Ð±Ð»Ð°Ð·Ð½ÐµÐ½Ñ‹ ðŸ˜œ","timeOver":"Ð’Ñ€ÐµÐ¼Ñ Ð²Ñ‹ÑˆÐ»Ð¾","restartInstructions":"ÐÐ°Ð¶Ð¼Ð¸Ñ‚Ðµ \'Ð¿Ñ€Ð¾Ð±ÐµÐ»\', Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð½Ð°Ñ‡Ð°Ñ‚ÑŒ Ð·Ð°Ð½Ð¾Ð²Ð¾","seduce":"Ð¡ÐžÐ‘Ð›ÐÐ—ÐÐ¯Ð™!","loversAttracted":"Ð¡ÐžÐ‘Ð›ÐÐ—ÐÐ•ÐÐž","timeLeft":"ÐžÐ¡Ð¢ÐÐ›ÐžÐ¡Ð¬","sec":"Ñ"}')},609:(t,e,i)=>{t.exports=i.p+"aafb2975f4cf7c6781b9.png"},136:(t,e,i)=>{t.exports=i.p+"bb903e47589412d1e855.png"},687:(t,e,i)=>{t.exports=i.p+"668ffc108d4f3bbc73f6.png"},28:(t,e,i)=>{t.exports=i.p+"8a28ac6d20ee7d1257d9.png"},569:(t,e,i)=>{t.exports=i.p+"c72dcc5d4e2d9138097e.png"},659:(t,e,i)=>{t.exports=i.p+"fb2c3964192a0ac22ede.png"},171:(t,e,i)=>{t.exports=i.p+"f75fd559a19042a343c6.png"},80:(t,e,i)=>{t.exports=i.p+"5aa93eab97d1506e208e.png"},501:(t,e,i)=>{t.exports=i.p+"aee6286b4bcdb8b0da1b.png"},945:(t,e,i)=>{t.exports=i.p+"7ae7cc1a0eb61a17cc5f.png"},823:(t,e,i)=>{t.exports=i.p+"9f85cca0b87a4cc91a54.png"},852:(t,e,i)=>{t.exports=i.p+"aa390721d0337f80f153.png"},567:(t,e,i)=>{t.exports=i.p+"f2273dee947f524346e3.png"},20:(t,e,i)=>{i.d(e,{DX:()=>U,H1:()=>E,K_:()=>W,Kg:()=>V,S1:()=>u,Sy:()=>p,V6:()=>it,jy:()=>F,l:()=>Y,rO:()=>P,t7:()=>z,xs:()=>Q,xv:()=>N,zD:()=>T});let s=()=>{};function n(t,e){let i=e.parentNode;if(t.setAttribute("data-kontra",""),i){let s=i.querySelector("[data-kontra]:last-of-type")||e;i.insertBefore(t,s.nextSibling)}else document.body.appendChild(t)}function r(t,e){let i=t.indexOf(e);if(-1!=i)return t.splice(i,1),!0}let a,h,o={};function c(t,e){o[t]=o[t]||[],o[t].push(e)}function l(t,...e){(o[t]||[]).map((t=>t(...e)))}let d={get:(t,e)=>"_proxy"==e||s};function p(){return h}function u(t,{contextless:e=!1}={}){if(a=document.getElementById(t)||t||document.querySelector("canvas"),e&&(a=a||new Proxy({},d)),!a)throw Error("You must provide a canvas element for the game");return h=a.getContext("2d")||new Proxy({},d),h.imageSmoothingEnabled=!1,l("init"),{canvas:a,context:h}}class f{constructor({spriteSheet:t,frames:e,frameRate:i,loop:s=!0,name:n}){let{width:r,height:a,margin:h=0}=t.frame;Object.assign(this,{spriteSheet:t,frames:e,frameRate:i,loop:s,name:n,width:r,height:a,margin:h,isStopped:!1,_f:0,_a:0})}clone(){return new f(this)}start(){this.isStopped=!1,this.loop||this.reset()}stop(){this.isStopped=!0}reset(){this._f=0,this._a=0}update(t=1/60){if(!this.isStopped)if(this.loop||this._f!=this.frames.length-1)for(this._a+=t;this._a*this.frameRate>=1;)this._f=++this._f%this.frames.length,this._a-=1/this.frameRate;else this.stop()}render({x:t,y:e,width:i=this.width,height:s=this.height,context:n=p()}){let r=this.frames[this._f]/this.spriteSheet._f|0,a=this.frames[this._f]%this.spriteSheet._f|0;n.drawImage(this.spriteSheet.image,a*this.width+(2*a+1)*this.margin,r*this.height+(2*r+1)*this.margin,this.width,this.height,t,e,i,s)}}function m(){return new f(...arguments)}let y=/(jpeg|jpg|gif|png|webp)$/,x=/(wav|mp3|ogg|aac)$/,w=/^\//,g=/\/$/,_=new WeakMap,v="",b="",S="";function A(t,e){return new URL(t,e).href}function k(t,e){return[t.replace(g,""),t?e.replace(w,""):e].filter((t=>t)).join("/")}function M(t){return t.split(".").pop()}function j(t){let e=t.replace("."+M(t),"");return 2==e.split("/").length?e.replace(w,""):e}let E={},Z={},L={};function X(){window.__k||(window.__k={dm:_,u:A,d:L,i:E})}function T(...t){return X(),Promise.all(t.map((t=>{let e=M([].concat(t)[0]);return e.match(y)?(i=t,X(),new Promise(((t,e)=>{let s,n,r;if(s=k(v,i),E[s])return t(E[s]);n=new Image,n.onload=function(){r=A(s,window.location.href),E[j(i)]=E[s]=E[r]=this,l("assetLoaded",this,i),t(this)},n.onerror=function(){e("Unable to load image "+s)},n.src=s}))):e.match(x)?function(t){return new Promise(((e,i)=>{let s,n,r,a,h=t;var o;return s=new Audio,n={wav:(o=s).canPlayType('audio/wav; codecs="1"'),mp3:o.canPlayType("audio/mpeg;"),ogg:o.canPlayType('audio/ogg; codecs="vorbis"'),aac:o.canPlayType("audio/aac;")},(t=[].concat(t).reduce(((t,e)=>t||(n[M(e)]?e:null)),0))?(r=k(b,t),Z[r]?e(Z[r]):(s.addEventListener("canplay",(function(){a=A(r,window.location.href),Z[j(t)]=Z[r]=Z[a]=this,l("assetLoaded",this,t),e(this)})),s.onerror=function(){i("Unable to load audio "+r)},s.src=r,void s.load())):i("cannot play any of the audio formats provided "+h)}))}(t):function(t){let e,i;return X(),e=k(S,t),L[e]?Promise.resolve(L[e]):fetch(e).then((t=>{if(!t.ok)throw t;return t.clone().json().catch((()=>t.text()))})).then((s=>(i=A(e,window.location.href),"object"==typeof s&&_.set(s,i),L[j(t)]=L[e]=L[i]=s,l("assetLoaded",s,t),s)))}(t);var i})))}function P(t,e){return(Math.random()*(e-t+1)|0)+t}function z(t,e,i){return t*(1-i)+e*i}function H(t,e,i){return Math.min(Math.max(t,i),e)}function D(t,e){return[t,e]=[t,e].map((t=>function(t){let{x:e=0,y:i=0,width:s,height:n}=t.world||t;return t.mapwidth&&(s=t.mapwidth,n=t.mapheight),t.anchor&&(e-=s*t.anchor.x,i-=n*t.anchor.y),s<0&&(e+=s,s*=-1),n<0&&(i+=n,n*=-1),{x:e,y:i,width:s,height:n}}(t))),t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y}class C{constructor(t=0,e=0,i={}){null!=t.x?(this.x=t.x,this.y=t.y):(this.x=t,this.y=e),i._c&&(this.clamp(i._a,i._b,i._d,i._e),this.x=t,this.y=e)}set(t){this.x=t.x,this.y=t.y}add(t){return new C(this.x+t.x,this.y+t.y,this)}subtract(t){return new C(this.x-t.x,this.y-t.y,this)}scale(t){return new C(this.x*t,this.y*t)}normalize(t=this.length()||1){return new C(this.x/t,this.y/t)}dot(t){return this.x*t.x+this.y*t.y}length(){return Math.hypot(this.x,this.y)}distance(t){return Math.hypot(this.x-t.x,this.y-t.y)}angle(t){return Math.acos(this.dot(t)/(this.length()*t.length()))}direction(){return Math.atan2(this.y,this.x)}clamp(t,e,i,s){this._c=!0,this._a=t,this._b=e,this._d=i,this._e=s}get x(){return this._x}get y(){return this._y}set x(t){this._x=this._c?H(this._a,this._d,t):t}set y(t){this._y=this._c?H(this._b,this._e,t):t}}function I(){return new C(...arguments)}class R{constructor(t){return this.init(t)}init(t={}){this.position=I(),this.velocity=I(),this.acceleration=I(),this.ttl=1/0,Object.assign(this,t)}update(t){this.advance(t)}advance(t){let e=this.acceleration;t&&(e=e.scale(t)),this.velocity=this.velocity.add(e);let i=this.velocity;t&&(i=i.scale(t)),this.position=this.position.add(i),this._pc(),this.ttl--}get dx(){return this.velocity.x}get dy(){return this.velocity.y}set dx(t){this.velocity.x=t}set dy(t){this.velocity.y=t}get ddx(){return this.acceleration.x}get ddy(){return this.acceleration.y}set ddx(t){this.acceleration.x=t}set ddy(t){this.acceleration.y=t}isAlive(){return this.ttl>0}_pc(){}}class O extends R{init({width:t=0,height:e=0,context:i=p(),render:s=this.draw,update:n=this.advance,children:r=[],anchor:a={x:0,y:0},opacity:h=1,rotation:o=0,scaleX:l=1,scaleY:d=1,...u}={}){this._c=[],super.init({width:t,height:e,context:i,anchor:a,opacity:h,rotation:o,scaleX:l,scaleY:d,...u}),this._di=!0,this._uw(),this.addChild(r),this._rf=s,this._uf=n,c("init",(()=>{this.context??=p()}))}update(t){this._uf(t),this.children.map((e=>e.update&&e.update(t)))}render(){let t=this.context;t.save(),(this.x||this.y)&&t.translate(this.x,this.y),this.rotation&&t.rotate(this.rotation),1==this.scaleX&&1==this.scaleY||t.scale(this.scaleX,this.scaleY);let e=-this.width*this.anchor.x,i=-this.height*this.anchor.y;(e||i)&&t.translate(e,i),this.context.globalAlpha=this.opacity,this._rf(),(e||i)&&t.translate(-e,-i),this.children.map((t=>t.render&&t.render())),t.restore()}draw(){}_pc(){this._uw(),this.children.map((t=>t._pc()))}get x(){return this.position.x}get y(){return this.position.y}set x(t){this.position.x=t,this._pc()}set y(t){this.position.y=t,this._pc()}get width(){return this._w}set width(t){this._w=t,this._pc()}get height(){return this._h}set height(t){this._h=t,this._pc()}_uw(){if(!this._di)return;let{_wx:t=0,_wy:e=0,_wo:i=1,_wr:s=0,_wsx:n=1,_wsy:r=1}=this.parent||{};this._wx=this.x,this._wy=this.y,this._ww=this.width,this._wh=this.height,this._wo=i*this.opacity,this._wsx=n*this.scaleX,this._wsy=r*this.scaleY,this._wx=this._wx*n,this._wy=this._wy*r,this._ww=this.width*this._wsx,this._wh=this.height*this._wsy,this._wr=s+this.rotation;let{x:a,y:h}=function(t,e){let i=Math.sin(e),s=Math.cos(e);return{x:t.x*s-t.y*i,y:t.x*i+t.y*s}}({x:this._wx,y:this._wy},s);this._wx=a,this._wy=h,this._wx+=t,this._wy+=e}get world(){return{x:this._wx,y:this._wy,width:this._ww,height:this._wh,opacity:this._wo,rotation:this._wr,scaleX:this._wsx,scaleY:this._wsy}}set children(t){this.removeChild(this._c),this.addChild(t)}get children(){return this._c}addChild(...t){t.flat().map((t=>{this.children.push(t),t.parent=this,t._pc=t._pc||s,t._pc()}))}removeChild(...t){t.flat().map((t=>{r(this.children,t)&&(t.parent=null,t._pc())}))}get opacity(){return this._opa}set opacity(t){this._opa=H(0,1,t),this._pc()}get rotation(){return this._rot}set rotation(t){this._rot=t,this._pc()}setScale(t,e=t){this.scaleX=t,this.scaleY=e}get scaleX(){return this._scx}set scaleX(t){this._scx=t,this._pc()}get scaleY(){return this._scy}set scaleY(t){this._scy=t,this._pc()}}function Y(){return new O(...arguments)}class W extends O{init({image:t,width:e=(t?t.width:void 0),height:i=(t?t.height:void 0),...s}={}){super.init({image:t,width:e,height:i,...s})}get animations(){return this._a}set animations(t){let e,i;for(e in this._a={},t)this._a[e]=t[e].clone(),i=i||this._a[e];this.currentAnimation=i,this.width=this.width||i.width,this.height=this.height||i.height}playAnimation(t){this.currentAnimation?.stop(),this.currentAnimation=this.animations[t],this.currentAnimation.start()}advance(t){super.advance(t),this.currentAnimation?.update(t)}draw(){this.image&&this.context.drawImage(this.image,0,0,this.image.width,this.image.height),this.currentAnimation&&this.currentAnimation.render({x:0,y:0,width:this.width,height:this.height,context:this.context}),this.color&&(this.context.fillStyle=this.color,this.context.fillRect(0,0,this.width,this.height))}}function F(){return new W(...arguments)}let $=/(\d+)(\w+)/;class B extends O{init({text:t="",textAlign:e="",lineHeight:i=1,font:s=p()?.font,...n}={}){t=""+t,super.init({text:t,textAlign:e,lineHeight:i,font:s,...n}),this.context&&this._p(),c("init",(()=>{this.font??=p().font,this._p()}))}get width(){return this._w}set width(t){this._d=!0,this._w=t,this._fw=t}get text(){return this._t}set text(t){this._d=!0,this._t=""+t}get font(){return this._f}set font(t){this._d=!0,this._f=t,this._fs=function(t){if(!t)return{computed:0};let e=t.match($),i=+e[1];return{size:i,unit:e[2],computed:i}}(t).computed}get lineHeight(){return this._lh}set lineHeight(t){this._d=!0,this._lh=t}render(){this._d&&this._p(),super.render()}_p(){this._s=[],this._d=!1;let t=this.context,e=[this.text];if(t.font=this.font,e=this.text.split("\n"),this._fw&&e.map((e=>{let i=e.split(" "),s=i.shift(),n=s;i.map((e=>{n+=" "+e,t.measureText(n).width>this._fw&&(this._s.push(s),n=e),s=n})),this._s.push(n)})),!this._s.length&&this.text.includes("\n")){let i=0;e.map((e=>{this._s.push(e),i=Math.max(i,t.measureText(e).width)})),this._w=this._fw||i}this._s.length||(this._s.push(this.text),this._w=this._fw||t.measureText(this.text).width),this.height=this._fs+(this._s.length-1)*this._fs*this.lineHeight,this._uw()}draw(){let t=0,e=this.textAlign,i=this.context;e=this.textAlign||("rtl"==i.canvas.dir?"right":"left"),t="right"==e?this.width:"center"==e?this.width/2|0:0,this._s.map(((s,n)=>{i.textBaseline="top",i.textAlign=e,i.fillStyle=this.color,i.font=this.font,this.strokeColor&&(i.strokeStyle=this.strokeColor,i.lineWidth=this.lineWidth??1,i.strokeText(s,t,this._fs*this.lineHeight*n)),i.fillText(s,t,this._fs*this.lineHeight*n)}))}}function N(){return new B(...arguments)}function q(t){let e=t.canvas;t.clearRect(0,0,e.width,e.height)}function U({fps:t=60,clearCanvas:e=!0,update:i=s,render:n,context:r=p(),blur:a=!1}={}){if(!n)throw Error("You must provide a render() function");let h,o,d,u,f,m=0,y=1e3/t,x=1/t,w=e?q:s,g=!0;function _(){if(o=requestAnimationFrame(_),g&&(d=performance.now(),u=d-h,h=d,!(u>1e3))){for(l("tick"),m+=u;m>=y;)f.update(x),m-=y;w(f.context),f.render()}}return a||(window.addEventListener("focus",(()=>{g=!0})),window.addEventListener("blur",(()=>{g=!1}))),c("init",(()=>{f.context??=p()})),f={update:i,render:n,isStopped:!0,context:r,start(){h=performance.now(),this.isStopped=!1,requestAnimationFrame(_)},stop(){this.isStopped=!0,cancelAnimationFrame(o)},_frame:_,set _last(t){h=t}},f}new WeakMap;class K{constructor({create:t,maxSize:e=1024}={}){let i;if(!t||!(i=t())||!(i.update&&i.init&&i.isAlive&&i.render))throw Error("Must provide create() function which returns an object with init(), update(), render(), and isAlive() functions");this._c=t,this.objects=[t()],this.size=0,this.maxSize=e}get(t={}){if(this.size==this.objects.length){if(this.size==this.maxSize)return;for(let t=0;t<this.size&&this.objects.length<this.maxSize;t++)this.objects.push(this._c())}let e=this.objects[this.size];return this.size++,e.init(t),e}getAliveObjects(){return this.objects.slice(0,this.size)}clear(){this.size=this.objects.length=0,this.objects.push(this._c())}update(t){let e,i=!1;for(let s=this.size;s--;)e=this.objects[s],e.update(t),e.isAlive()||(i=!0,this.size--);i&&this.objects.sort(((t,e)=>e.isAlive()-t.isAlive()))}render(){for(let t=this.size;t--;)this.objects[t].render()}}function V(){return new K(...arguments)}function J(t){let e=[];return t._dn?e.push(t._dn):t.children&&t.children.map((t=>{e=e.concat(J(t))})),e}class G{constructor({id:t,name:e=t,objects:i=[],context:s=p(),cullObjects:r=!0,cullFunction:a=D,sortFunction:h,...o}){this._o=[],Object.assign(this,{id:t,name:e,context:s,cullObjects:r,cullFunction:a,sortFunction:h,...o});let l=this._dn=document.createElement("section");l.tabIndex=-1,l.style="position:absolute;width:1px;height:1px;overflow:hidden;clip:rect(0,0,0,0);",l.id=t,l.setAttribute("aria-label",e);let d=this;this.camera=new class extends O{set x(t){d.sx=t-this.centerX,super.x=t}get x(){return super.x}set y(t){d.sy=t-this.centerY,super.y=t}get y(){return super.y}}({context:s,anchor:{x:.5,y:.5},render:this._rf.bind(this)}),this.add(i),this._i=()=>{this.context??=p();let t=this.context.canvas,{width:e,height:i}=t,s=e/2,r=i/2;Object.assign(this.camera,{centerX:s,centerY:r,x:s,y:r,width:e,height:i}),this._dn.isConnected||n(this._dn,t)},this.context&&this._i(),c("init",this._i)}set objects(t){this.remove(this._o),this.add(t)}get objects(){return this._o}add(...t){t.flat().map((t=>{this._o.push(t),t.parent=this,J(t).map((t=>{this._dn.appendChild(t)}))}))}remove(...t){t.flat().map((t=>{r(this._o,t),t.parent=null,J(t).map((t=>{n(t,this.context)}))}))}show(){this.hidden=this._dn.hidden=!1;let t=this._o.find((t=>t.focus));t?t.focus():this._dn.focus(),this.onShow()}hide(){this.hidden=this._dn.hidden=!0,this.onHide()}destroy(){var t,e;t="init",e=this._i,o[t]=(o[t]||[]).filter((t=>t!=e)),this._dn.remove(),this._o.map((t=>t.destroy&&t.destroy()))}lookAt(t){let{x:e,y:i}=t.world||t;this.camera.x=e,this.camera.y=i}update(t){this.hidden||this._o.map((e=>e.update&&e.update(t)))}_rf(){let{_o:t,context:e,_sx:i,_sy:s,camera:n,sortFunction:r,cullObjects:a,cullFunction:h}=this;e.translate(i,s);let o=t;a&&(o=o.filter((t=>h(n,t)))),r&&o.sort(r),o.map((t=>t.render&&t.render()))}render(){if(!this.hidden){let{context:t,camera:e}=this,{x:i,y:s,centerX:n,centerY:r}=e;t.save(),this._sx=n-i,this._sy=r-s,t.translate(this._sx,this._sy),e.render(),t.restore()}}onShow(){}onHide(){}}function Q(){return new G(...arguments)}function tt(t){if(+t==t)return t;let e=[],i=t.split(".."),s=+i[0],n=+i[1],r=s;if(s<n)for(;r<=n;r++)e.push(r);else for(;r>=n;r--)e.push(r);return e}class et{constructor({image:t,frameWidth:e,frameHeight:i,frameMargin:s,animations:n}={}){if(!t)throw Error("You must provide an Image for the SpriteSheet");this.animations={},this.image=t,this.frame={width:e,height:i,margin:s},this._f=t.width/e|0,this.createAnimations(n)}createAnimations(t){let e,i;for(i in t){let{frames:s,frameRate:n,loop:r}=t[i];if(e=[],null==s)throw Error("Animation "+i+" must provide a frames property");[].concat(s).map((t=>{e=e.concat(tt(t))})),this.animations[i]=m({spriteSheet:this,frames:e,frameRate:n,loop:r,name:i})}}}function it(){return new et(...arguments)}}},r={};function a(t){var e=r[t];if(void 0!==e)return e.exports;var i=r[t]={id:t,exports:{}};return n[t](i,i.exports,a),i.exports}t="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",e="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",i="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",s=t=>{t&&t.d<1&&(t.d=1,t.forEach((t=>t.r--)),t.forEach((t=>t.r--?t.r++:t())))},a.a=(n,r,a)=>{var h;a&&((h=[]).d=-1);var o,c,l,d=new Set,p=n.exports,u=new Promise(((t,e)=>{l=e,c=t}));u[e]=p,u[t]=t=>(h&&t(h),d.forEach(t),u.catch((t=>{}))),n.exports=u,r((n=>{var r;o=(n=>n.map((n=>{if(null!==n&&"object"==typeof n){if(n[t])return n;if(n.then){var r=[];r.d=0,n.then((t=>{a[e]=t,s(r)}),(t=>{a[i]=t,s(r)}));var a={};return a[t]=t=>t(r),a}}var h={};return h[t]=t=>{},h[e]=n,h})))(n);var a=()=>o.map((t=>{if(t[i])throw t[i];return t[e]})),c=new Promise((e=>{(r=()=>e(a)).r=0;var i=t=>t!==h&&!d.has(t)&&(d.add(t),t&&!t.d&&(r.r++,t.push(r)));o.map((e=>e[t](i)))}));return r.r?c:a()}),(t=>(t?l(u[i]=t):c(p),s(h)))),h&&h.d<0&&(h.d=0)},a.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return a.d(e,{a:e}),e},a.d=(t,e)=>{for(var i in e)a.o(e,i)&&!a.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),a.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;a.g.importScripts&&(t=a.g.location+"");var e=a.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var i=e.getElementsByTagName("script");if(i.length)for(var s=i.length-1;s>-1&&!t;)t=i[s--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=t})(),a.nc=void 0,a(138)})();